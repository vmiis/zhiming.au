<!DOCTYPE html>
<html>
<head>
  <title>Conway's Game of Life</title>
  <style>
    canvas {
      border: 1px solid #000;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas"></canvas>

  <script>
    const canvas = document.getElementById('gameCanvas');
    canvas.width = 500;
    canvas.height = 500;
    const ctx = canvas.getContext('2d');
    const cellSize = 10;
    const numRows = canvas.height / cellSize;
    const numCols = canvas.width / cellSize;

    // Create a 2D array to represent the grid
    const grid = new Array(numRows)
      .fill(null)
      .map(() => new Array(numCols).fill(false));

    // Function to initialize the grid with random live cells
    function initializeGrid() {
      for (let row = 0; row < numRows; row++) {
        for (let col = 0; col < numCols; col++) {
          grid[row][col] = Math.random() < 0.5;
        }
      }
    }

    // Function to draw the grid on the canvas
    function drawGrid() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      for (let row = 0; row < numRows; row++) {
        for (let col = 0; col < numCols; col++) {
          if (grid[row][col]) {
            ctx.fillRect(col * cellSize, row * cellSize, cellSize, cellSize);
          }
        }
      }
    }

    // Function to update the grid based on the rules of the game
    function updateGrid() {
      const newGrid = new Array(numRows)
        .fill(null)
        .map(() => new Array(numCols).fill(false));

      for (let row = 0; row < numRows; row++) {
        for (let col = 0; col < numCols; col++) {
          const neighbors = countNeighbors(row, col);
          if (grid[row][col]) {
            newGrid[row][col] = neighbors === 2 || neighbors === 3;
          } else {
            newGrid[row][col] = neighbors === 3;
          }
        }
      }

      grid.splice(0, grid.length, ...newGrid);
    }

    // Function to count the live neighbors of a cell
    function countNeighbors(row, col) {
      let count = 0;
      for (let i = -1; i <= 1; i++) {
        for (let j = -1; j <= 1; j++) {
          if (i === 0 && j === 0) continue;
          const newRow = row + i;
          const newCol = col + j;
          if (newRow >= 0 && newRow < numRows && newCol >= 0 && newCol < numCols) {
            count += grid[newRow][newCol] ? 1 : 0;
          }
        }
      }
      return count;
    }

    // Main game loop
    function gameLoop() {
      drawGrid();
      updateGrid();
      //requestAnimationFrame(gameLoop);
      setTimeout(gameLoop, 200);
    }

    // Initialize the grid and start the game loop
    initializeGrid();
    gameLoop();
  </script>
</body>
</html>
