$vm={api_address:"https://api.zhiming.au"},"127.0.0.1"!=window.location.hostname&&"localhost"!=window.location.hostname||($vm.api_address="http://localhost:8001"),$vm.request=function(n){return new Promise((e,i)=>{var t=sessionStorage.getItem("vm_token");null==t&&(t=""),fetch($vm.api_address,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(n)}).then(t=>t.json()).then(t=>{e(t)}).catch(t=>{i(t)})})},$vm.ai_list={},$vm.update_ai_list=function(e){var t=localStorage.getItem("zhiming.au.topic-question-list"),i={},n=(null!=t&&(i=JSON.parse(t)),{});for(key in $vm.ai_list=i){var a=localStorage.getItem("zhiming.au.mtime"+key);null!=a&&(n[key]=a)}$vm.request({cmd:"ai-list",datetime:n}).then(t=>{$vm.ai_list={},t.list.forEach(t=>{""!=t.contents?($vm.ai_list[t.name]=t.contents,localStorage.setItem("zhiming.au.mtime"+t.name,(new Date).toISOString())):$vm.ai_list[t.name]=i[t.name]}),localStorage.setItem("zhiming.au.topic-question-list",JSON.stringify($vm.ai_list)),e()})},$vm.dsiplay_ai_list=function(t){const i=/[\u4e00-\u9fa5]/;var e="",n=[];for(key in $vm.ai_list)n.push(key);n.sort();for(var a="",l="",o=0;o<n.length;o++){""==a&&2==n[o].split("/").length?(a=s=n[o].split("/")[0],e+="<div style='break-inside:avoid;'>"+s+"<div style='padding-left:20px;'>"):""!=a&&1==n[o].split("/").length&&(a="",e+="</div></div>"),""==l&&3==n[o].split("/").length?(l=s=n[o].split("/")[1],e+=s+"<div style='padding-left:20px'>"):""!=l&&2==n[o].split("/").length&&(l="",e+="</div>");var s,r="";""!=a&&(r="'"+a+"/'"),""!=l&&(r="'"+a+"/"+l+"/'"),(null==t||""==t||-1!=n[o].toLowerCase().indexOf(t.toLowerCase()))&&(e+="<u f="+r+">"+n[o].split("/").pop()+"</u><br>")}var m=document.getElementById("vm_nav");m.innerHTML=e,m.querySelectorAll("u").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();t=e.getAttribute("f");i.test(e.textContent)?window.location.href=window.location.href.replace(".html","").split("portal")[0]+"?【"+t+e.textContent+"】":window.location.href=window.location.href.replace(".html","").split("portal")[0]+"?["+t+e.textContent+"]"})})},$vm.update_ai_list($vm.dsiplay_ai_list);const inputElement=document.getElementById("filter");function inputChanged(){var t=inputElement.value;$vm.dsiplay_ai_list(t)}inputElement.addEventListener("input",inputChanged);