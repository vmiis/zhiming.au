$vm={api_address:"https://api.zhiming.au"},"127.0.0.1"!=window.location.hostname&&"localhost"!=window.location.hostname||($vm.api_address="http://localhost:8001"),$vm.request=function(a){return new Promise((e,i)=>{var t=sessionStorage.getItem("vm_token");null==t&&(t=""),fetch($vm.api_address,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify(a)}).then(t=>t.json()).then(t=>{e(t)}).catch(t=>{i(t)})})},$vm.ai_list={},$vm.update_ai_list=function(e){var t=localStorage.getItem("zhiming.au.topic-question-list"),i={},a=(null!=t&&(i=JSON.parse(t)),{});for(key in $vm.ai_list=i){var n=localStorage.getItem("zhiming.au.mtime"+key);null!=n&&(a[key]=n)}$vm.request({cmd:"ai-list",datetime:a}).then(t=>{$vm.ai_list={},t.list.forEach(t=>{""!=t.contents?($vm.ai_list[t.name]=t.contents,localStorage.setItem("zhiming.au.mtime"+t.name,(new Date).toISOString())):$vm.ai_list[t.name]=i[t.name]}),localStorage.setItem("zhiming.au.topic-question-list",JSON.stringify($vm.ai_list)),e()})},$vm.dsiplay_ai_list=function(){const i=/[\u4e00-\u9fa5]/;var t="",e=[];for(key in $vm.ai_list)e.push(key.toLowerCase());e.sort();for(var a=0;a<e.length;a++)t+="<u>"+e[a]+"</u><br>";var n=document.getElementById("vm_nav");n.innerHTML=t,n.querySelectorAll("u").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),i.test(e.textContent)?window.open(window.location.href.split("portal.html")[0]+"?【"+e.textContent+"】"):window.open(window.location.href.split("portal.html")[0]+"?["+e.textContent+"]")})})},$vm.update_ai_list($vm.dsiplay_ai_list);