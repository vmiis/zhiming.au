<!DOCTYPE html>
<html>
    <head>
        <meta name="description" content="">
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <meta charset="UTF-8">
        <link rel="icon" href="data:,">
        <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-3.5.1.min.js"></script>
    </head>
    <body>
        <div class="parent">
            <div><input id=q contentEditable="true" style="margin-right:6px;height:26px;width: calc(100% - 0px);display:inline-block"></input><!--<button id=s >Submit</button>--></div>
            <div id=a style="padding-top:10px"></div>
            <div id=p contentEditable="true" style="height:0px"></div>
        </div>
        <script>
            (()=>{
                var server='https://05.vmiis.com';
                if(window.location.hostname=='127.0.0.1' || window.location.hostname=='localhost') server='http://localhost:8001';

                var query=function(){
                    var data={cmd:'qna',q:$('#q').val(),p:$('#p').text()}
                    fetch(server,{
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(data)                        
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        $('#a').text(data.answer);
                        $('#q').val('');
                    })
                    .catch(error => {
                        console.error(error);
                    });
                }
                q.addEventListener("keyup", function(event) {
                    if (event.keyCode === 13) {
                        query();
                    }
                })
                $('#s').on('click',function(){
                    query();
                })
            })();
        </script>
        <style>
            html,body,input,textarea{
                margin:0;
                padding:0;
                height:100%;
                width:100%;
            }
            .parent {
                height:calc(100% - 20px);
                display: grid;
                grid-template-columns: 1fr;
                grid-template-rows: 30px 1fr 0px;
                grid-column-gap: 0px;
                grid-row-gap: 0px;
                padding:10px;
            }
        </style>
    </body>
</html>
